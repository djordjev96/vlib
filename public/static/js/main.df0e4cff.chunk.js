(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),c=n(8),s=n.n(c),i=(n(25),n(26),n(2)),r=n(5),u=n.n(r);u.a.defaults.baseURL="http://localhost:3000",u.a.defaults.headers.common={Authorization:"Bearer ".concat(localStorage.getItem("token"))},u.a.defaults.responseType="json";var l=u.a,j=n(0),d=function(e){var t=e.searchInput,n=e.onSearchInputChange;return Object(j.jsx)("form",{children:Object(j.jsx)("input",{type:"text",placeholder:"Search...",value:t,onChange:function(e){return n(e.target.value)}})})},b=a.a.createContext(),h=a.a.createContext(),O=function(e){var t=e.book,n=e.editBook,a=Object(o.useState)(""),c=Object(i.a)(a,2),s=c[0],r=c[1];return Object(j.jsxs)("div",{children:[Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var o=document.getElementById("title").value,a=document.getElementById("author").value,c=document.getElementById("publisher").value,s=document.getElementById("note").value;l.patch("/books/"+t._id,{title:o,author:a,publisher:c,note:s},{validateStatus:function(){return!0}}).then((function(e){201===e.status?(r("Knjiga je uspesno izmenjena!"),n({title:o,author:a,publisher:c,note:s})):r("Polja naslov, autor i izdavac su obavezna")}))}(e)},children:[Object(j.jsx)("input",{type:"text",name:"title",id:"title",defaultValue:t.title}),Object(j.jsx)("input",{type:"text",name:"author",id:"author",defaultValue:t.author}),Object(j.jsx)("input",{type:"text",name:"publisher",id:"publisher",defaultValue:t.publisher}),Object(j.jsx)("input",{type:"text",name:"note",id:"note",defaultValue:t.note}),Object(j.jsx)("button",{type:"submit",value:"Submit",children:"Posalji"})]}),s]})},p=n(4),f=n.n(p),x={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",border:"1px solid #ccc",background:"#fff",transform:"translate(-50%, -50%)",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},m=function(e){var t=e.book,n=Object(o.useContext)(b),a=n.numOfBooks,c=n.setNumOfBooks,s=Object(o.useContext)(h),r=s.books,u=s.setBooks,d=Object(o.useState)(t),p=Object(i.a)(d,2),m=p[0],v=p[1],g=Object(o.useState)(!1),k=Object(i.a)(g,2),y=k[0],B=k[1];f.a.setAppElement("#root");return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:m.title}),Object(j.jsx)("td",{children:m.author}),Object(j.jsx)("td",{children:m.publisher}),Object(j.jsx)("td",{children:m.note}),Object(j.jsxs)("td",{children:[Object(j.jsx)("button",{onClick:function(){return function(e){!0===window.confirm("Da li ste sigurni da zelite da obrisete knjigu?")&&l.delete("/books/"+e._id).then((function(t){window.alert("Knjiga je uspesno obrisana");var n=r.indexOf(e),o=r.splice(n,1);u(o),c(a-1)}))}(m)},className:"actionBtn",children:"Obrisi knjigu"}),Object(j.jsx)("button",{onClick:function(){B(!0)},className:"actionBtn",children:"Izmeni knjigu"}),Object(j.jsx)(f.a,{isOpen:y,onRequestClose:function(){B(!1)},style:x,contentLabel:"Izmeni knjigu",children:Object(j.jsx)(O,{book:m,editBook:function(e){v(e)}})})]})]})},v=function(e){var t=e.searchInput,n=e.numOfBooksFound,a=e.error,c=[],s=Object(o.useContext)(h),i=s.books;s.setBooks;return i&&i.forEach((function(e){-1===e.title.toLowerCase().indexOf(t.toLowerCase())&&-1===e.author.toLowerCase().indexOf(t.toLowerCase())&&-1===e.publisher.toLowerCase().indexOf(t.toLowerCase())||c.push(Object(j.jsx)(m,{book:e},e._id))})),Object(j.jsx)("div",{children:a||""===t?a:Object(j.jsxs)("div",{children:["Pronadjeno knjiga: ",n,Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Naslov"}),Object(j.jsx)("th",{children:"Autor"}),Object(j.jsx)("th",{children:"Izdava\u010d"}),Object(j.jsx)("th",{children:"Napomena"}),Object(j.jsx)("th",{children:"Akcija"})]})}),Object(j.jsx)("tbody",{children:c})]})]})})},g=function(){var e=Object(o.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)([]),s=Object(i.a)(c,2),r=s[0],u=s[1],b=Object(o.useState)(""),O=Object(i.a)(b,2),p=O[0],f=O[1],x=Object(o.useState)(0),m=Object(i.a)(x,2),g=m[0],k=m[1];Object(o.useEffect)((function(){k(0),n.length>=3&&l.get("/books?searchInput="+n,{validateStatus:function(){return!0}}).then((function(e){if(404===e.status)f("Knjiga nije pronadjena");else if(!e.status||e.status>=500)f("Greska na serveru");else{var t=e.data.books;u(t),f(""),k(t.length)}})).catch((function(e){return console.log(e)}))}),[n]);return Object(j.jsxs)("div",{children:[Object(j.jsx)(d,{searchInput:n,onSearchInputChange:function(e){a(e)}}),Object(j.jsx)(h.Provider,{value:{books:r,setBooks:u},children:Object(j.jsx)(v,{searchInput:n,numOfBooksFound:g,error:p})})]})},k=function(){var e=Object(o.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(o.useContext)(b),s=c.numOfBooks,r=c.setNumOfBooks;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=document.getElementById("title").value,n=document.getElementById("author").value,o=document.getElementById("publisher").value,c=document.getElementById("note").value;l.post("/books",{title:t,author:n,publisher:o,note:c},{validateStatus:function(){return!0}}).then((function(e){201===e.status?(a("Knjiga je uspesno dodata!"),r(s+1)):a("Polja naslov, autor i izdavac su obavezna")}))}(e)},children:[Object(j.jsx)("input",{type:"text",name:"title",id:"title",placeholder:"Naslov knjige"}),Object(j.jsx)("input",{type:"text",name:"author",id:"author",placeholder:"Autor knjige"}),Object(j.jsx)("input",{type:"text",name:"publisher",id:"publisher",placeholder:"Izdavac"}),Object(j.jsx)("input",{type:"text",name:"note",id:"note",placeholder:"Napomena"}),Object(j.jsx)("button",{type:"submit",value:"Submit",children:"Posalji"})]}),n]})},y={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",border:"1px solid #ccc",background:"#fff",transform:"translate(-50%, -50%)",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},B=function(){var e=Object(o.useState)(0),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(!1),s=Object(i.a)(c,2),r=s[0],u=s[1];f.a.setAppElement("#root"),Object(o.useEffect)((function(){l.get("/books").then((function(e){var t=e.data.numOfBooks;a(t)})).catch((function(e){return console.log(e)}))}),[]);return Object(j.jsx)(b.Provider,{value:{numOfBooks:n,setNumOfBooks:a},children:Object(j.jsxs)("div",{children:["Ukupno knjiga u biblioteci: ",n," ",Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:function(){u(!0)},children:"Dodaj knjigu"}),Object(j.jsx)(f.a,{isOpen:r,onRequestClose:function(){u(!1)},style:y,contentLabel:"Dodaj knjigu",children:Object(j.jsx)(k,{})}),Object(j.jsx)(g,{})]})})},S=function(){var e=Object(o.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),console.log(e);var t=document.getElementById("email").value,n=document.getElementById("password").value;l.post("/users/login",{email:t,password:n},{validateStatus:function(){return!0}}).then((function(e){200===e.status?(localStorage.setItem("token",e.data.token),window.location.reload(!1)):403===e.status?a("Greska!"):404===e.status&&a("Korisnik ne postoji")}))}(e)},children:[Object(j.jsxs)("label",{children:["Email",Object(j.jsx)("input",{type:"text",placeholder:"Email",id:"email",name:"email"})]}),Object(j.jsxs)("label",{children:["\u0160ifra",Object(j.jsx)("input",{type:"password",placeholder:"\u0160ifra",id:"password",name:"password"})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"Prijavi se"})}),n]})};var I=function(){return localStorage.getItem("token")?Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)("h1",{children:"vLib - virtual library"})}),Object(j.jsx)("div",{className:"appBody",children:Object(j.jsx)(B,{})})]}):Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)("h1",{children:"vLib - virtual library"}),Object(j.jsx)(S,{})]})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),o(e),a(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(I,{})}),document.getElementById("root")),w()}},[[57,1,2]]]);
//# sourceMappingURL=main.df0e4cff.chunk.js.map